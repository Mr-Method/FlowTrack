<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>
            FlowTrack
        </title>

        <script type="text/javascript" charset="utf8" src="/js/jquery-1.8.1.min.js"> </script>
        <script type="text/javascript" charset="utf8" src="/js/flot/jquery.flot.min.js"> </script>
        <script type="text/javascript" charset="utf8" src="/js/flot/jquery.flot.time.min.js"> </script>
        <script type="text/javascript" charset="utf8" src="/js/flot/jquery.flot.resize.min.js"> </script>
        <link type="text/css" href="/css/smoothness/jquery-ui-1.8.23.custom.css" rel="Stylesheet">
        <link type="text/css" href="/css/base.css" rel="Stylesheet">

        <script type="text/javascript">
            $(document).ready(function($) 
            {
                var data = [];
                    var options = {
                    lines: { show: true },
                    xaxes: 
                    [
                        {
                            mode: "time",
                        },
                    ],
                    yaxes: 
                    [
                        {
                            tickFormatter: function (val,axis)
                            {
                                if (val > 1000000)
                                  return (val / 1000000).toFixed(axis.tickDecimals) + " MB";
                                else if (val > 1000)
                                  return (val / 1000).toFixed(axis.tickDecimals) + " kB";
                                else
                                  return val.toFixed(axis.tickDecimals) + " B"; 
                            }
                        },
                    ],
                    grid: {
                        borderColor: "#E6E6E6",
                    }
                };

                function onDataReceived(series)
                {
                    $.plot($("#topGraph"), [series.ingress_bytes, series.egress_bytes], options);
                }

                function getData()
                {
                     $.ajax({
                        url:"/json/LastHourTotals/1",
                        method: 'GET',
                        dataType: 'json',
                        success: onDataReceived
                     });

                }
                getData();
                setInterval(getData, 120000);
            });

        </script>
    </head>
    <body>
        <div class="wrapper">
            <div id="topGraph"></div>
        </div>
    </body>
</html>